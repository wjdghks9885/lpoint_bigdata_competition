jupyter.nims.re.kr

library(data.table)
Product <- fread("product.csv",encoding="UTF-8")
Search1 <- fread("search1.csv",encoding="UTF-8")
Search2 <- fread("Search2.csv",encoding="UTF-8")
Custom <- fread("custom.csv",encoding="UTF-8")
Session <- fread("session.csv",encoding="UTF-8")
Master <- fread("master.csv",encoding="UTF-8")

library(dplyr)
product2=left_join(product,master,by='PD_C')
product2=product2 %>% arrange(CLAC1_NM)
a=product2 %>% select(CLAC1_NM) %>% unique() # 37개 대분류

product2 %>% filter(HITS_SEQ==1) #이상치 5200개 
product3=product2 %>% filter(HITS_SEQ!=1) # 이상치 삭제

result=left_join(product2,search1,by=c("CLNT_ID","SESS_ID"))
result2=left_join(result,custom,by="CLNT_ID")

선호지수:현재상태파악
키워드
검색 건수
브랜드
상품 대분류
세션 일자: 시계열
연령
지역
성별

선호지수-트렌드예측 링크
지수(블랙핑크아님) = 비교
현상황파악
상품카테고리
검색건수-세션조회시간-페이지조회수
선행지수
상품별로도 보지만 사람별로도 봄
검색키워드먼저

트렌드예측
모두가좋아하는이벤트
특정사람들이좋아하는이벤트
원하지않는광고나이벤트는 받는걸좋아하지않음
데이터 기간 내 이벤트 다 확인

트레이닝데이터 테스트데이터
(4~5월데이터)  (6월데이터)

결국 다 돈더벌려고 하는거임
돈낭비 안하려고 하는거
잘못하지않기위해 하는거
비용합리화

★수요를 특성별로 정리
글로벌수요 반복구매수요 간헐적소비수요 이벤트충 ?연령별수요? 등
행동별 수요 카테고리 (수요행위)
지수개발
real time 비지니스
로버스어쩌고테스트
기법의 다양성(이러이러한기법들을 썼는데 결과는같다 요정도)

트렌드도 정리
카테고리별트렌드 브랜드별트렌드
트렌드정리는 피라미드식

인사이트 = So what?

cost효율 (적은비용 좋은효과)
비용입장에서 생각

이 그룹(n명)이 이시기에 어떤물건을 살 것이다 라는 데이터

전체 그림이 오져야함.

선호지수는 예를들어 남녀별로 상품분류마다 선호지수가 나온다.

지역별수요 연령별수요 남녀별수요 상품가격별수요(범주형) 분기별수요 브랜드별수요 

커스텀에서 성별,연령대는 최초접속한 기기에서 부여받은 클라이언트 아이디에만 남아있음.
그래서 성별,연령대로 분석을 할 때에는 저 정보가 없는 데이터는 룰아웃시켜서 분석.
교수님 왈 : 프로덕트 커스텀 세션 마스터 4개는 조인가능.
            검색어를 소분류로 분류
            머지 목표설정 (Search1 머지가 오바임) 막 합치면 옵절베이션이 늘어남
            Search1 어떻게 해야할지 겁나고민각 보임
            Search2 스탠드얼론 각 보임
            Search2로 뭘 해볼 수 있을까?
            우리가 텍스트마이닝에 약해~ (자연어)

타겟분류(밸류?)
지수를 만드는 방법 : 주성분분석방법(타겟이없을때) 회귀분석
구매한 월

>>선호도에 대한 정의부터 하자 (우리맘대로) 목적!

대분류선호도를 알고싶다 -> 
구매했냐안했냐(바이노미얼) 구매카운트(포아송) 구매금액(리그레션)
선호도는 서치안써도될것같다
서치가 선호도에 영향을 줄까?
(왠지 서치에서 검색량정도는 쓸 수 있을것같다.)
모델링을 위한 데이터 정리!

썼던거 저장안됐네 ㅅㅂ

전처리 룰에 대해서 설명해야돼
검색어 지울 때 공백과 특수문자를 먼저 지운 후 
한글자짜리 지우는데 정규표현식으로 ㄱ부터 ㅣ a부터 z 이런식으로???지웠다?
단순자음(모음)들은 다 blank
eyecream
테이블마다 전처리 필요여부 근거 등 말해야한다
전처리 했다면 확실히 근거 방법 인사이트 다 언급해야함
테이블들이 연결되는건 그냥 한페이지에 다보여줘도 됨
4개묶은거에 서치1까지 묶으면 그사람의 행태까지 보임
서치2 링크 하지마라 걍따로봐라 (100%아니래요)?
서치1,세션,커스텀 머지한거에서 서치2같이 만들면 서치2의 부분집합임 -> 이거 석세스함
스마트바인드 또한 다시 고민각임
합치는게 무조건 좋은건 아니다 필요할 때 합치면 됨
주어진 테이블이 갖고있는 eda 먼저
합치고 난 후 eda
요일도 중요하다
공휴일s 4~9월이면 어린이날 석가탄신일 추석 등
평일 주말 일요일공휴일 다른색깔로 표시하면 트렌드 확 보임
논리 아주 좋아함 진흠찡
데이터 기반 논리적 긍까 우리가 뭘 하면 그거에 대한 설명이 돼야 함 (말이 돼야함)
이상치로 간주하는 기준을 정하면 됨

검색량이 높아지면 히츠도 높아질것이다? 세션시간도 높아질것이다? 페이지뷰수도 올라갈것이다?


rfm 분석 (=폐기된 모델ㅅㅂ)
mama=new_session %>% group_by(CLNT_ID) %>% summarise(frequency=n())
s_d=new_session %>% select(CLNT_ID,SESS_DT)
ss_d=s_d %>% group_by(CLNT_ID) %>% summarise(recency=max(SESS_DT))
mama=left_join(mama,ss_d,by='CLNT_ID')
bb=all_product %>% mutate(Sales=PD_BUY_AM*PD_BUY_CT)
bb= bb %>% group_by(CLNT_ID) %>% summarise(monetary=sum(Sales))
mama=left_join(mama,bb,by='CLNT_ID')
mama=mama %>% filter(monetary!="NA")
install.packages("rfm")
library(lubridate)
mama$recency=as.character(mama$recency)
mama$recency=as_date(mama$recency)
mama$recency=as.numeric(as_date('2018-09-30')-mama$recency)
analysis_date=lubridate::as_date('2018-09-30',tz='UTC')
result=rfm_table_customer(mama,CLNT_ID,frequency,recency,monetary,analysis_date,recency_bin=3,frequency_bins=3,monetary_bins=3)
head(result$rfm)

search1 = search2의 부분집합
search1_in_s2=search1_session %>% select(SESS_DT,KWD_NM,SEARCH_CNT)
search1_in_s2 <- melt(search1_in_s2, id.vars=c("SESS_DT","KWD_NM"))
search1_in_s2=dcast(search1_in_s2,SESS_DT+KWD_NM~variable,sum)
search1_in_s2=as.data.table(search1_in_s2)
new_search2=new_search2 %>% arrange(SESS_DT)
sear=left_join(new_search2,search1_in_s2,by=c('SESS_DT','KWD_NM'))

our plan : vip고객들 대상으로 돈을 더 쓰게 하자 (탕진잼 a.k.a.텅장)

한번에 많이 사는 고객
회원정보 없는애들은 빼라
사람특성말고 명품같이 구매특성? 외부요인 같은거로 해야하지않을까 ㅅㅂ

상품군별 구매한 사람들의 특성을 파악


CLNT_ID SESS_ID DVC_CTG_NM ZON_NM CLNT_GENDER CLNT_AGE PD_BUY_AM PD_BUY_CT CLAC1_NM

자동차용품-생활
영상/음향가전-가전
인테리어/조명-생활
냉장/세탁가전-가전
축산물-식품
상품권-서비스
냉동식품-식품
냉장식품-식품
계절가전-가전
컴퓨터-가전
과일-식품
헬스/피트니스-생활
모바일-가전
구기/필드스포츠-

검색량high middle low NA
HIT SEQ PAG HR Sales

인공신경망
제품군의 점수
구매횟수 구매금액? 검색건수 -> 가중치(히트,뷰수,세션시간 etc)

상품군별 소비자들의 행동파악(?)
소비자 집단별 선호지수(?)

지역별 sum
남녀 비율?

클라이언트별로 몇번접속을했고 몇번구매를했냐 그룹바이(클라이언트아이디) 랭크시퀀스맥시멈=구매횟수 마이너스시퀀스=접속횟수?
고객을나누려고하잖아 그럼 행이 고객이돼야대
이 디바이스별로 옵설베이션이 1개가나와야해
지금은 행이 한디바이스별로 여러개니까 케이민즈 할수가없어
이 디바이스를 통해 구매한 고객을 보고 접속횟수 구매횟수 등 따져서 해야된당
상품군별 소비자들의 행동특성 파악 -> 진흠띠는 이러케생각하는듯
상품분류에 대한 날리지가 없으니 대대분류 만들기는 초큼 오바다 -> 건드리지 않는게 좋을것같다
37개중에 몇개만하는게 낫지않을까 랍니다
파이프라인만 만들어주면되잖아
37개 전체 대분류 안해도되겠다 그냥 몇개만뽑아서 개이득보자
외부데이터 무조건 넣어야돼
목적 우린목적이없다 ㅅㅂ
디바이스별이 뭔소린지 모르겠다
저거 집단나눈거(행동특성들로) : 단순히 행태다 롯데홈페이지 가서 하는 행위만 보인다
		                구매했을때 정보만 남아있으니까? 저기엔 성별 나이 지역? 넣어도 될듯
				집단3개 개오바
				파생변수 하나 만든거다
군집분석에 들어갈 변수들을 다 넣었는가
상품군별 -> 행동특성군집나누기  ??
행동특성군집나누기 -> 상품군별  ??
소비자 그룹을 나눈다음에 소비자그룹별로 선호지수를 개발하겠다 상품군별로 이게 논리적으로맞나
온라인에서의 행태가 상품선호에 영향을 미친다?

상품군별 소비자들의 행동특성을 봐야겠네

영상/음향가전 계절가전 냉장/세탁가전 생활/주방가전
all_products=all_product %>% mutate(Sales=PD_BUY_AM*PD_BUY_CT)
x=as.character(all_product$SESS_DT)
x=as_date(x)
Month=month(x)
Weekday=weekdays(x)
all_products=all_product2 %>% mutate(Month,Weekday)

상푼군별 무슨특성들로 선호지수를 구할지
소비자들 무슨특성들로 집단을 나눌지
행동은 -> 선호지수
소비자집단은 -> 인구통계학적이 맞지않나

선호지수 : HITS_SEQ, Sales, TOT_PAG_VIEW_CT, TOT_SESS_HR_V, 
패션잡화, 여성의류, 스포츠패션, 화장품/뷰티케어, 남성의류

4월1일의 선호지수
히츠 페이지뷰 세션시간 세일즈

공모전 주제를 어떻게 접근했는가
과제에 대한 주체?
온라인성장 오진다라고 하려면 ->온라인 오프라인 성장 둘다말해야함 상대적성장도?
온라인만 온라인시대다!하면 그냥주장임
시작이 탄탄해야함
궁금증 유발ㅋ
#슬라이드5장 이내에 위에6줄 다써야함
롯데 비판은 빼야함
문제인식+주제설정 : 근거가 있어야함 (이유 명확) 근거확실
통계학과 학생들이 논리전개가 약하기 때문에;
가설!?
이런이런 문제같아서 우리는 이런식으로 하기로했다!
분석가는 내 생각이 중요하다 이게아님
데이터에 뭐가있는지 등등 무슨데이터인지? 뭘나타내는데이터
아무설명없이 보는사람이 판단하게하면 안됨(외부데이터?)
데이터(엑셀제목?) -> 무슨데이터
이런식으로 설명만하고
우리가 쓸 변수만 제대로보여주면됨
이상치 판단 근거
결측치 먼저 그다음 이상치
이상치나 결측치 몇개있는지 몇퍼센트인지
전처리 안한 테이블도 언급해줘야함
그냥 프로덕트+세션+커스텀+마스터 4개합친거만 설명
왜합쳤는지? 설명
반반세로
 ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
ㅣ		     ㅣ 		  ㅣ
ㅣ		     ㅣ		  	  ㅣ
ㅣ	세	     ㅣ		세	  ㅣ
ㅣ	1	     ㅣ		3	  ㅣ
ㅣ		     ㅣ			  ㅣ
ㅣ		     ㅣ			  ㅣ
ㅣ	로	     ㅣ		로	  ㅣ
ㅣ	2	     ㅣ		4	  ㅣ
ㅣ		     ㅣ			  ㅣ
ㅣ		     ㅣ			  ㅣ
ㅣ		     ㅣ			  ㅣ
 ㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡㅡ
분석가의 근본
커스텀 머지했을때 성별,연령대 NA인거 설명 ㄱ
프레젠테이션은 강약조절 잘해야함ㅋ
파생변수 설명 (강조 ㄱㄱ) 어디서 쓰려고 만들었는지 (왜만들었는지)
중요한건 강하게~
잘한거는 잘난척 오지게 해라 like github
근데 어차피 주제없으면 ㅂㅂ인듯ㅋ
상품군별 비율 지수같은거 파레토그림?같은거로 ㄱㄱ
재구매율ㅋ
선호지수 개발할때 쓴 변수 정확하게 설명
가전도 이제 온라인에서 좀많이산다 (고가)
고가제품이니 보안도중요하고 등등
이쁘다
분석결과는 해석만
decision tree regression
nnet svm
너무 놀았다
롯데의사업진행방향x -> 온라인 시장에 초점 근거 추이
고냥 요정도만 쓰면될듯
아니다 넣지맙시다 시간이없다!
피피티는 우리꺼가 이김 ㅋ

# 선호지수 = 상품군별 구매횟수/상품군 전체 구매횟수의 평균
# 행동특성추가 선호지수 -> 기법이용

여성의류 
676691 
화장품/뷰티케어 
573446 
스포츠패션 
563713 
남성의류 
554441 
패션잡화 
448471 
속옷/양말/홈웨어 
417199 
유아동의류 
341296 
시즌스포츠 
150258 
출산/육아용품 
141270 
퍼스널케어 
132844 
건강식품 
123430 
원예/애완 
94612 
식기/조리기구 
78257 
침구/수예 
78170 
완구 
54173 
음료 
50144 
문구/사무용품 
49582 
주방잡화 
48556 
아웃도어/레저 
45848 
세제/위생 
45396 
청소/세탁/욕실용품
44486 
가구 
43398 
생활/주방가전 
41798 
구기/필드스포츠 
33879 
모바일 
26043 
헬스/피트니스 
25399 
과일 
25076 
컴퓨터 
22692 
계절가전 
13860 
냉장식품 
13835 
냉동식품 
13572 
상품권 
13458 
축산물 
12005 
냉장/세탁가전 
7515 
인테리어/조명 
7227 
영상/음향가전 
6349 
자동차용품 
1341 

이용지수 1234 정보활용성이 높음 5678 정보활용성이 낮음

eda
뷰카운트 히트 상관관계
